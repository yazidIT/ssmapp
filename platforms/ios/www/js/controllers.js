angular.module("starter.controllers",["myServices","ngStorage"]).constant("eVar",{"01":"optEntityCRegNo","02":"optEntityBRegNo","03":"optEntityNewIC","04":"optEntityPassNo","06":"optEntityCRefNo","07":"optEntityOldIC","08":"optEntitySecLicenseNo",10:"optEntityPoliceID",11:"optEntityAuditFirm",12:"optEntityAuditor",15:"optEntityOthers",17:"optEntityArmyID",ROC:"optEntityCRegNo",ROB:"optEntityBRegNo",LLP:"optEntityLLP"}).controller("AppCtrl",["$scope","$ionicModal","$timeout","$ionicHistory","$state","$ionicViewService","$ionicConfigProvider",function(t,e,o,n,a,i,r){t.loginData={},e.fromTemplateUrl("templates/login.html",{scope:t}).then(function(e){t.modal=e}),t.closeLogin=function(){t.modal.hide()},t.login=function(){t.modal.show()},t.doLogin=function(){"test"===t.loginData.username&&(window.localStorage.setItem("password",t.loginData.username),i.nextViewOptions({disableAnimate:!0,disableBack:!0}),a.go("app.news"))},t.goBack=function(){n.goBack()},r.backButton.previousTitleText(!1)}]).controller("PlaylistsCtrl",["$scope",function(t){t.playlists=[{title:"News & Announcements",id:1},{title:"e-Query",id:2},{title:"e-Compound",id:3},{title:"e-Search",id:4},{title:"Status 308",id:5},{title:"Contact Us",id:6},{title:"Bahasa Malaysia",id:7},{title:"Main",id:8},{title:"Equeer",id:9}]}]).controller("MenuCtrl",["$scope",function(t){t.mySelect="Company Registration Number",t.placeHolder="Company Registration",t.processSelectValue=function(e){t.placeHolder=e}}]).controller("LogoutCtrl",["$scope","$state",function(t,e){t.logOut=function(){window.localStorage.removeItem("password"),e.go("login")}}]).controller("PlaylistCtrl",["$scope","$stateParams",function(t,e){}]).controller("FloatMenuCtrl",["$scope","$state","$ionicHistory","myFmFactory","langSvc","currTranslateSvc","$rootScope",function(t,e,o,n,a,i,r){t.goBack=function(n){o.nextViewOptions({disableBack:!0}),t.mfb="closed",e.go(n)},r.$on("reloadOnLanguageChange",function(){t.buttons=n.getButtons(i.getData())}),t.buttons=n.getButtons(i.getData())}]).controller("BrowseLink",["$scope","myContactUs",function(t,e){t.openXLink=function(t){window.open(t,"_system","location=yes")},t.openInLink=function(t){window.open(t,"_blank")},t.contactlist=e.getcontactlist()}]).controller("MainController",["$scope","$cordovaDevice","$filter","$ionicPlatform","$ionicSlideBoxDelegate","$state","deviceAuth","newsSvc","licInfo","eQuerySvc","config","langSvc","currTranslateSvc","newsStoreSvc","$rootScope","$localStorage","popupError","$cordovaNetwork",function(t,e,o,n,a,i,r,c,l,s,u,p,d,g,f,m,v,y){function D(){var e,o=d.getData();c.getNews(o.MENU_01).then(function(t){e=t.data,m.news=t.data},function(t){e=m.news})["finally"](function(){t.userData=e.data[p.getLang()],g.setData(e.data[p.getLang()]),a.update()}),setTimeout(function(){window.cordova&&navigator.splashscreen.hide()},1e3)}n.ready(function(){t.initDevice=function(){var t=e.getDevice();r.setUUID(t.uuid),r.setPlatform(o("lowercase")(t.platform));r.getDevInfo()},t.initDevice()}),r.registerDevice().then(function(e){t.devData=e.data,r.setToken(t.devData.data.token),t.dev2Data=r.getDevInfo()}),d.setData(translations[p.getLang()]),D(),f.$on("reloadOnLanguageChange",function(){D()}),t.getDetailNews=function(t){var e=d.getData();if(window.cordova&&y.isOffline())return void v.noInternet(e.ERROR_TITLE);var o={first:"",second:"",query:t};s.setData(o),i.go("app.detailnews")},t.next=function(){a.next()},t.previous=function(){a.previous()},t.slideIndex=0,t.slideChanged=function(e){t.slideIndex=e}}]).controller("NewsCtrl",["$scope","$state","eQuerySvc","newsStoreSvc","currTranslateSvc","$rootScope","popupError","$cordovaNetwork",function(t,e,o,n,a,i,r,c){t.userData=n.getData(),t.getDetailNews=function(t){var n=a.getData();if(window.cordova&&c.isOffline())return void r.noInternet(n.ERROR_TITLE);var i={first:"",second:"",query:t};o.setData(i),e.go("app.detailnews")}}]).controller("DetailNewsResult",["$scope","newsSvc","currTranslateSvc",function(t,e,o){var n=[];t.userData=n;var a=o.getData();e.getDetailNews(a.MENU_01).then(function(e){t.userData=e.data})}]).controller("QueryInfo",["$scope","$ionicPopup","$ionicHistory","$state","getQuery","eQuerySvc","currTranslateSvc","popupError","$cordovaNetwork",function(t,e,o,n,a,i,r,c,l){t.placeHolder="Comp. No / MyCoID",t.showResult=function(){var e=r.getData();if(window.cordova&&l.isOffline())return void c.noInternet(e.ERROR_TITLE);var e=r.getData();a.loadUserData(e.MENU_05).then(function(e){return 200!=e.status?void(t.data.input=""):0==e.data.data.length?void(t.data.input=""):void n.go("app.equery_ans")}),t.queryData=i.getData()},t.searchInfo=function(e){if(void 0===e)i.emptySearch();else if(0==e.length)i.emptySearch();else{var o={first:"",second:"",query:e};i.setData(o),t.showResult()}}}]).controller("QueryResult",["$scope","getQuery","eQuerySvc",function(t,e,o){t.userData=e.getData()}]).controller("CmpndMenuCtrl",["$scope","eVar","currTranslateSvc","$rootScope",function(t,e,o,n){t.input={entityType:"Company Registration No.",compound:"Registrar of Companies (ROC)"},t.input.entityType="01";var a=function(){var n=o.getData();t.placeHolder=n[e[t.input.entityType]]};n.$on("reloadOnLanguageChange",function(){a()}),a(),t.cmpndData="ROC",t.entityData=t.cmpndData,t.compoundSelect=function(){t.cmpndData=t.input.compound},t.entityTypeSelect=function(){var n=o.getData();t.placeHolder=n[e[t.input.entityType]],t.entityData=t.input.entityType}}]).controller("CompoundInfo",["$scope","$ionicPopup","$ionicHistory","$state","getCmpnd","eQuerySvc","currTranslateSvc","popupError","$cordovaNetwork",function(t,e,o,n,a,i,r,c,l){t.input.compound="ROC",t.showResult=function(){var e=r.getData();return window.cordova&&l.isOffline()?void c.noInternet(e.ERROR_TITLE):(a.loadUserData(e.MENU_06).then(function(e){return 200!=e.status?void(t.input.entityNo=""):0==e.data.data.length?void(t.input.entityNo=""):void n.go("app.ecompound_ans")}),void(t.queryData=i.getData()))},t.compoundInfo=function(e,o){if(void 0===e)i.emptySearch();else if(0==e.length)i.emptySearch();else{var n=o,a={first:t.cmpndData,second:n,query:e};i.setData(a),t.showResult()}}}]).controller("CmpndResult",["$scope","getCmpnd","eQuerySvc",function(t,e,o){t.userData=e.getData()}]).controller("BMCtrl",["$scope","$translate","langSvc","myFmFactory","currTranslateSvc","$element","$rootScope","$state","$ionicHistory",function(t,e,o,n,a,i,r,c,l){t.langSelected=o.getLang(),t.ChangeLanguage=function(i){e.use(i),o.setLang(i),t.langSelected=i,a.setData(translations[o.getLang()]),n.getButtons(a.getData()),r.$broadcast("reloadOnLanguageChange"),c.go("app.main")}}]).controller("SearchInfo",["$scope","$window","$ionicPopup","$ionicHistory","$state","eQuerySvc","getSearch","currTranslateSvc","popupError","$cordovaNetwork",function(t,e,o,n,a,i,r,c,l,s){t.input.entityType="ROC",t.showResult=function(){var e=c.getData();return window.cordova&&s.isOffline()?void l.noInternet(e.ERROR_TITLE):(r.loadUserData(e.MENU_07).then(function(e){return 200!=e.status?void(t.input.entityNo=""):0==e.data.data.length?void(t.input.entityNo=""):void a.go("app.esearch_ans")}),void(t.queryData=i.getData()))},t.searchInfo=function(e){if(void 0===e)i.emptySearch();else if(0==e.length)i.emptySearch();else{var o={first:t.entityData,query:e};i.setData(o),t.showResult()}},e.OpenLink=function(t){window.open(t,"_system")}}]).controller("SearchResult",["$scope","getSearch","eQuerySvc",function(t,e,o){t.userData=e.getData()}]).controller("S308Info",["$scope","$ionicPopup","$ionicHistory","$state","eQuerySvc","currTranslateSvc","getS308","$rootScope","popupError","$cordovaNetwork",function(t,e,o,n,a,i,r,c,l,s){var u=function(){var e=i.getData();t.placeHolder=e.placeHolderS308};c.$on("reloadOnLanguageChange",function(){u()}),u(),t.showResult=function(){var e=i.getData();return window.cordova&&s.isOffline()?void l.noInternet(e.ERROR_TITLE):(r.loadUserData(e.MENU_08).then(function(e){return 200!=e.status?void(t.data.input=""):0==e.data.data.length?void(t.data.input=""):void n.go("app.status308_ans")}),void(t.queryData=a.getData()))},t.s308Info=function(e){if(void 0===e)a.emptySearch();else if(0==e.length)a.emptySearch();else{var o={query:e};a.setData(o),t.showResult()}}}]).controller("S308Result",["$scope","getS308","eQuerySvc",function(t,e,o){t.userData=e.getData()}]).controller("ContactUs",["$scope","SSMOfficesService","$cordovaGeolocation","langSvc","$rootScope","$localStorage",function(t,e,o,n,a,i){t.contactIsEmpty=!0,viewContacts=function(e){function o(e){null!=t.marker&&t.marker.setMap(null);var o=new google.maps.LatLng(e.location.lat,e.location["long"]);t.map.panTo(o),t.marker=new google.maps.Marker({map:t.map,animation:google.maps.Animation.DROP,position:o});var a=new google.maps.InfoWindow({content:"SSM "+e.name});google.maps.event.addListener(t.marker,"click",function(){a.open(t.map,t.marker)}),a.open(t.map,t.marker),t.myHtmlAddr=t.selectedOption.address,"en"!==n.getLang()?t.myHtmlOperation=t.selectedOption.operationHourMs:t.myHtmlOperation=t.selectedOption.operationHour,t.myHtmlTel=t.selectedOption.tel,t.myHtmlFax=t.selectedOption.fax}t.offices.forEach(function(t){"en"!==n.getLang()?t.placeHolderName=t.nameMs:t.placeHolderName=t.name}),t.contactIsEmpty=!1;var a=t.offices[0];void 0!==e&&(a=t.offices[e]),t.selectedOption=a;var i=new google.maps.LatLng(a.location.lat,a.location["long"]),r={center:i,zoom:15,streetViewControl:!1,mapTypeId:google.maps.MapTypeId.ROADMAP};t.map=new google.maps.Map(document.getElementById("map"),r),t.myHtmlAddr=t.selectedOption.address,t.myHtmlTel=t.selectedOption.tel,t.myHtmlFax=t.selectedOption.fax,"en"!==n.getLang()?t.myHtmlOperation=t.selectedOption.operationHourMs:t.myHtmlOperation=t.selectedOption.operationHour,google.maps.event.addListenerOnce(t.map,"idle",function(){o(a)}),t.changeMarker=function(){o(t.selectedOption)},t.trustAsHtml=function(t){return $sce.trustAsHtml(t)},t.gotoLocation=function(){window.open("http://maps.google.com?q="+t.selectedOption.location.lat+","+t.selectedOption.location["long"],"_system","location=yes")},t.call=function(){window.open("tel:"+t.selectedOption.mainTel.replace(/\s/g,""),"_system")},t.email=function(){window.open("mailto:"+t.selectedOption.email.replace("[at]","@"),"_system","location=yes")}},defaultTel={tel:"+60322994400",fax:"+0322994411"},t.generalLine=defaultTel,void 0!==i.generalLine&&(t.generalLine=i.generalLine),void 0!==i.contactList&&(t.offices=i.contactList,viewContacts()),e.list().then(function(e){void 0!==e.data.data.generalLine&&(i.generalLine=e.data.data.generalLine,t.generalLine=i.generalLine),officesData=e.data.data.offices,void 0!=officesData&&0!=officesData.length&&(void 0!==officesData&&0!==officesData.length&&(t.offices=officesData,i.contactList=t.offices),viewContacts(e.data.data.defaultId))})}]);