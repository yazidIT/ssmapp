angular.module("myServices",[]).constant("config",{apiUrl:"https://m.ssm.com.my/api/"}).factory("popupError",["$ionicPopup","$ionicHistory",function(t,n){var e=function(n){t.alert({title:n,template:"<center>{{'ERROR_INTERNET'|translate}}</center>",buttons:[{text:'<b class="title-class">OK</b>',type:"button-positive",onTap:function(t){}}]})},o=function(e,o,r){msg="<center>{{'ERROR_QUERY'|translate}}</center>",401===r?msg="<center>{{'ERROR_AUTHORIZED'|translate}}</center>":429===r&&(msg="<center>{{'ERROR_OVERLIMIT'|translate}}</center>");var i=t.alert({title:e,template:msg,buttons:[{text:'<b class="title-class">Close</b>',type:"button-positive",onTap:function(t){i.close(),o&&n.goBack()}}]})},r=function(n){t.alert({title:n,template:'<center><div translate="norecord"></div></center>',buttons:[{text:'<b class="title-class">OK</b>',type:"button-positive",onTap:function(t){}}]})};return{noInternet:e,serverFail:o,noRecord:r}}]).factory("licInfo",["$ionicPopup","$interval",function(t,n){function e(){r=n(o,2e4)}function o(){n.cancel(r);var o=t.alert({title:'<h4 class="title-assertive">Demo Version App</h4>',template:"This version is for internal demo only",buttons:[{text:'<b class="title-class">Close</b>',type:"button-positive button-small",onTap:function(t){o.close(),e()}}]})}var r;return{start:e}}]).factory("myFmFactory",function(){var t={};return t.getButtons=function(t){var n=[{label:t.MENU_08,icon:"icon-icon2_308",dest:"app.status308"},{label:t.MENU_06,icon:"icon-icon2_eC",dest:"app.ecompound"},{label:t.MENU_05,icon:"icon-icon2_eQ",dest:"app.equery"},{label:t.MENU_07,icon:"icon-icon2_eS",dest:"app.esearch"}];return n},t}).factory("myContactUs",function(){var t=[{icon:"ion-social-facebook",dest:"https://www.facebook.com/ssmofficialpage",mood:"positive"},{icon:"ion-social-twitter",dest:"https://twitter.com/ssmofficialpage",mood:"calm"},{icon:"ion-social-instagram",dest:"https://instagram.com/ssmofficialpage",mood:"dark"},{icon:"ion-social-youtube",dest:"http://www.youtube.com/user/ssmofficialpage",mood:"assertive"},{},{}],n={};return n.getcontactlist=function(){return t},n}).factory("eQuerySvc",["$ionicPopup","langSvc",function(t,n){var e={first:"",second:"",query:""},o=function(t){e=t},r=function(){return e},i=function(){var e=translations[n.getLang()];t.alert({title:e.ATTENTION,template:'<center><div translate="emptySearch"></div></center>',buttons:[{text:'<b class="title-class">Ok</b>',type:"button-positive"}]})};return{getData:r,setData:o,emptySearch:i}}]).factory("deviceAuth",["$http","$ionicHistory","$ionicLoading","$ionicPopup","config",function(t,n,e,o,r){function i(t){f=t}function a(t){l=t}function c(t){p=t}function u(){return{uuid:f,platform:l,token:p}}function s(){d();var n=t({method:"POST",url:r.apiUrl+"register-device",data:{uuid:f,type:l}}).success(function(t){return t.data}).error(function(t,n){})["finally"](function(){v()});return n}var f="",l="",p="",d=function(){e.show({template:'<p translate="SEARCHING">Searching ...</p><ion-spinner></ion-spinner>'})},v=function(){e.hide()};return{setUUID:i,setPlatform:a,registerDevice:s,getDevInfo:u,setToken:c}}]).factory("newsSvc",["$http","$ionicPopup","$ionicLoading","$ionicHistory","eQuerySvc","langSvc","config","$cordovaNetwork","popupError",function(t,n,e,o,r,i,a,c,u){function s(n){l();var e=a.apiUrl+"news/multi",o=t({method:"GET",url:e}).success(function(t){return t.data}).error(function(t,e){u.serverFail(n)})["finally"](function(){p()});return o}function f(n){var e=r.getData();l();var o=t({method:"GET",url:e.query}).success(function(t){return t.data}).error(function(t,e){u.serverFail(n,!0)})["finally"](function(){p()});return o}var l=function(){e.show({template:'<p translate="SEARCHING">Searching ...</p><ion-spinner></ion-spinner>'})},p=function(){e.hide()};return{getNews:s,getDetailNews:f}}]).factory("getQuery",["$http","$ionicPopup","$ionicLoading","$ionicHistory","deviceAuth","eQuerySvc","langSvc","config","popupError",function(t,n,e,o,r,i,a,c,u){function s(n){var e=r.getDevInfo(),o=i.getData(),s=a.getLang();p();var f=t({method:"POST",url:c.apiUrl+"equery",data:{token:e.token,documentNo:o.query,lang:s}}).success(function(t){return 0===t.data.length&&u.noRecord(n),l=t.data,t.data}).error(function(t,e){u.serverFail(n,!1,e)})["finally"](function(){d()});return f}function f(){return l}var l,p=function(){e.show({template:'<p translate="SEARCHING">Searching ...</p><ion-spinner></ion-spinner>'})},d=function(){e.hide()};return{loadUserData:s,getData:f}}]).factory("getCmpnd",["$http","$ionicPopup","$ionicLoading","$ionicHistory","deviceAuth","eQuerySvc","config","popupError",function(t,n,e,o,r,i,a,c){function u(n){var e=r.getDevInfo(),o=i.getData();l();var u=t({method:"POST",url:a.apiUrl+"ecompound",data:{token:e.token,type:o.first,entityType:o.second,entityNo:o.query}}).success(function(t){return 0===t.data.length&&c.noRecord(n),f=t.data,t.data}).error(function(t,e){c.serverFail(n,!1,e)})["finally"](function(){p()});return u}function s(){return f}var f,l=function(){e.show({template:'<p translate="SEARCHING">Searching ...</p><ion-spinner></ion-spinner>'})},p=function(){e.hide()};return{loadUserData:u,getData:s}}]).factory("getSearch",["$http","$ionicPopup","$ionicLoading","$ionicHistory","deviceAuth","eQuerySvc","config","popupError",function(t,n,e,o,r,i,a,c){function u(n){var e=r.getDevInfo(),o=i.getData();l();var u=t({method:"POST",url:a.apiUrl+"esearch",data:{token:e.token,type:o.first,value:o.query}}).success(function(t){return 0===t.data.length&&c.noRecord(n),f=t.data,t.data}).error(function(t,e){c.serverFail(n,!1,e)})["finally"](function(){p()});return u}function s(){return f}var f,l=function(){e.show({template:'<p translate="SEARCHING">Searching ...</p><ion-spinner></ion-spinner>'})},p=function(){e.hide()};return{loadUserData:u,getData:s}}]).factory("getS308",["$http","$ionicPopup","$ionicLoading","$ionicHistory","deviceAuth","eQuerySvc","config","popupError",function(t,n,e,o,r,i,a,c){function u(n){var e=r.getDevInfo(),o=i.getData();l();var u=t({method:"POST",url:a.apiUrl+"strikeoff",data:{token:e.token,companyNo:o.query}}).success(function(t){return 0===t.data.length&&c.noRecord(n),f=t.data,t.data}).error(function(t,e){c.serverFail(n,!1,e)})["finally"](function(){p()});return u}function s(){return f}var f,l=function(){e.show({template:'<p translate="SEARCHING">Searching ...</p><ion-spinner></ion-spinner>'})},p=function(){e.hide()};return{loadUserData:u,getData:s}}]).factory("langSvc",function(){function t(t){e=t}function n(){return e}var e="en";return{setLang:t,getLang:n}}).factory("currTranslateSvc",function(){function t(t){this.data=t}function n(){return this.data}return{setData:t,getData:n}}).factory("newsStoreSvc",function(){function t(t){this.data=t}function n(){return this.data}return{setData:t,getData:n}}).factory("SSMOfficesService",["$http","$ionicLoading","config","popupError",function(t,n,e,o){function r(){i();var n=e.apiUrl+"contact_us",r=t({method:"GET",url:n}).success(function(t){return t.data}).error(function(t,n){o.serverFail(title,!1)})["finally"](function(){a()});return r}var i=function(){n.show({template:'<p translate="SEARCHING">Searching ...</p><ion-spinner></ion-spinner>'})},a=function(){n.hide()};return{list:r}}]);